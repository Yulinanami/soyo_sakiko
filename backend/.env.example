# SoyoSaki 后端环境变量配置文件
# 请将此文件复制重命名为 .env 并依据需求填写具体数值

# --- 数据库配置 ---
# 数据库连接地址，默认使用当前目录下的 SQLite 数据库文件 soyosaki.db
# 格式: sqlite:///./<文件名>.db
DATABASE_URL=sqlite:///./soyosaki.db

# --- 日志配置 ---
# 日志级别，可选 DEBUG, INFO, WARNING, ERROR 等。
LOG_LEVEL=INFO

# --- 并发配置 ---
# 适配器最大工作线程数（每个连接池）。
# 增加此数值可提高并发抓取速度，但过高可能导致被目标网站封禁 IP 或触发反爬。
ADAPTER_MAX_WORKERS=8

# --- 安全认证配置 JWT ---
# JWT 签名密钥。在正式部署时请务必修改为一个复杂的随机字符串以确保安全！
SECRET_KEY=your-super-secret-key-change-me-in-production
# 加密算法，通常保持 HS256 即可不用修改
ALGORITHM=HS256
# Token 有效期（分钟），默认为 525600 (1年)，即登录一次后很久无需重新登录
ACCESS_TOKEN_EXPIRE_MINUTES=525600

# --- 跨域资源共享 CORS 配置 ---
# 允许的前端访问地址列表，用于解决跨域问题。
CORS_ORIGINS=["http://localhost:5173","http://127.0.0.1:5173"]

# --- Pixiv 数据源配置 ---
# Pixiv 的 refresh_token，必须配置才能通过 API 获取 Pixiv 小说。
PIXIV_REFRESH_TOKEN=

# --- Lofter 数据源配置 ---
# Lofter 网页版 Cookie，必填。如果不填可能无法正常搜索或查看部分受限内容。
# 获取方式：浏览器登录 lofter.com，按 F12 打开开发者工具，在网络请求中找到 Cookie 复制。
LOFTER_COOKIE=
# Lofter 验证码 Token，选填。遇到验证码拦截时可能需要。
LOFTER_CAPTTOKEN=

# [Lofter 动态抓取/浏览器模拟]
# 是否启用 Playwright 浏览器模拟抓取。
# 开启后可以解决部分反爬虫导致抓不到内容的问题，但速度较慢且消耗资源。
# true 为开启，false 为关闭。
LOFTER_DYNAMIC_ENABLED=false
# 浏览器是否“无头”模式（不显示界面）。
# true 为后台静默运行（推荐），false 为显示浏览器窗口（调试用）。
LOFTER_DYNAMIC_HEADLESS=true
# 动态抓取时一次搜索最大获取条数
LOFTER_DYNAMIC_MAX_ITEMS=30
# 动态抓取时页面自动向下滚动加载的次数（加载更多内容）
LOFTER_DYNAMIC_MAX_SCROLLS=8
# 每次滚动后的等待时间（毫秒），等待新内容加载
LOFTER_DYNAMIC_SCROLL_WAIT_MS=1200
# 打开页面后的初始等待时间（毫秒），等待页面渲染
LOFTER_DYNAMIC_INITIAL_WAIT_MS=1500
# 动态结果缓存时间（秒），在此时间内相同的搜索关键词不会再次发起浏览器请求
LOFTER_DYNAMIC_CACHE_TTL=300

# 普通模式（API/静态解析）下的最大分页/条目数
LOFTER_MAX_PAGE_SIZE=30

# --- Bilibili 数据源配置 (可选) ---
# Bilibili 的 SESSDATA Cookie。
# 如果需要访问 B 站专栏文章或需要登录的内容，请填写此项。
# 获取方式：浏览器登录 bilibili.com，F12 查看 Cookie 中的 SESSDATA。
BILIBILI_SESSDATA=

# --- 阅读历史配置 ---
# 阅读历史记录保留天数，超过此时间的记录可能会被系统自动清理。
READING_HISTORY_TTL_DAYS=30
